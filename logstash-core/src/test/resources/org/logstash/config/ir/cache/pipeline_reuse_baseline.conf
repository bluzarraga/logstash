input {
  stdin { }
}

filter {
  mutate { rename => ["a_field", "into_another"] }
  if [message] {
    mutate { rename => ["a_field", "into_another"] }
  } else if [test] {
    sleep { time => 1 }
  } else {
    mutate { rename => ["yet_a_field", "yet_into_another"] }
  }
  if [message] {
    if [message] {
      mutate { rename => ["a_field", "into_another"] }
    }
  }
}

output {
  stdout { }
  if [message] {
    stdout { codec => dots }
  } else if [test] {
    stdout { codec => line }
  } else {
    stdout { }
  }
}

